---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';

const projects = [
  {
    id: "drummer-posture",
    title: "Drummer Posture Monitoring",
    shortDescription: "Real-time posture monitoring for drummers",
    description: "A prototype application for real-time monitoring of posture while playing drums. Shows live feedback and helps drummers correct bad postural habits using advanced computer vision techniques.",
    image: "src/assets/drums.png",
    tags: ["React", "Python", "OpenPose", "Computer Vision"],
    technologies: ["React", "Python", "OpenPose", "MediaPipe", "TensorFlow"],
    challenges: ["Real-time processing", "Pose accuracy", "User feedback systems"],
    outcomes: ["90% accuracy in posture detection", "Real-time feedback system", "Improved drummer awareness"],
    githubUrl: "https://github.com/0r080r0/WebApp-DrummerPosture",
    demoUrl: "https://0r080r0.github.io/WebApp-DrummerPosture/",
    readTime: "GitHub & Live Demo"
  },
  {
    id: "music-therapy-ai",
    title: "Musician Health Survey",
    shortDescription: "Online survey assessing musicians' mental and physical wellbeing",
    description: "Developed a structured, web-based questionnaire to assess musicians' mental health, physical health, and overall wellbeing. Designed for use in longitudinal studies, the tool enables consistent self-report data collection to support health monitoring and analysis alongside physiological measures. Includes evidence-informed guidance tailored to each domain.",
    image: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=600&h=400&fit=crop",
    tags: ["Musician Health", "Survey Design", "Questionnaire", "Longitudinal Studies"],
    technologies: ["R", "JavaScript", "HTML", "CSS"],
    challenges: ["Designing questions that balance clinical relevance with accessibility", "Creating tailored, evidence-based guidance without exceeding the scope of non-clinical tools", "Ensuring future compatibility with multimodal datasets"],
    outcomes: ["Built a flexible survey tool for structured assessment of musician health", "Enables longitudinal self-report data collection for research and health monitoring", "Supports integration of subjective health metrics into broader musician wellbeing analyses"],
    githubUrl: "#",
    readTime: "GitHub"
  },
  {
    id: "biomechanical-analysis",
    title: "Biomechanical Analysis (EMG)",
    shortDescription: "Muscle activity pattern analysis for injury prevention",
    description: "Independently developed skills in electromyography analysis to identify early musculoskeletal risk factors such as tension and inefficient muscle coordination in drummers. This enables detection of potential injury risks in real-time performance scenarios and supports evidence-based injury and pain prevention interventions such as EMG biofeedback, body awareness, and advanced technologies like vagus nerve stimulation - aiming to improve physical health by preventing musculoskeletal disorders common in musicians.",
    image: "https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=600&h=400&fit=crop",
    tags: ["Computer Vision", "Biomechanics", "Health Analytics"],
    technologies: ["R", "Python", "EMG"],
    challenges: ["Extracting meaningful muscle contraction signals from noisy simulated EMG data", "Translating complex EMG signals into actionable insights for biofeedback and targeted interventions", "Detecting and quantifying co-contractions linked to muscular inefficiency"],
    outcomes: ["Independently developed practical skills in EMG signal processing relevant to musician health research", "Supports my PhD proposal's focus on injury and pain prevention in drummers via evidence-based interventions", "Provides a foundation for understanding muscle function and guiding targeted prevention strategies"],
    githubUrl: "https://github.com/0r080r0/PhD-Portfolio/tree/main/EMG_DataAnalysis",
    readTime: "GitHub"
  },
  {
    id: "performance-analytics",
    title: "ML-Based Early Detection and Prediction of Injury and Pain",
    shortDescription: "ML algorithm for prediction of performance-related musculoskeletal injuries",
    description: "This project applies machine learning techniques to analyze electromyography (EMG) signals, biomechanical data, and subjective measures to both detect early signs of injury risk and predict future injury and pain outcomes in musicians. By integrating multimodal data sources, the model aims to enable proactive, personalized interventions that improve musician health and performance longevity.",
    image: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=600&h=400&fit=crop",
    tags: ["Data Analytics", "Performance Metrics", "Skill Development"],
    technologies: ["Python", "D3.js", "PostgreSQL", "Docker"],
    challenges: ["Metric standardization", "Performance correlation", "Visual analytics"],
    outcomes: ["20% improvement in practice efficiency", "Personalized learning paths", "Performance tracking dashboard"],
    githubUrl: "#",
    demoUrl: "#",
    readTime: "4 min read"
  },
  {
    "ergonomic-assessment": {
        title: "Multi-Level Modeling",
        description: "This project applied multi-level modeling (MLM) techniques to an AI-generated dataset designed with domain-specific input to simulate panic symptoms and contextual factors in drummers. While the dataset itself was synthetically generated, it was structured around realistic variables selected based on research literature and personal experience in musician health. Variables included panic symptom indicators, lifestyle habits, performance context, and musical background.",
        image: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=600&h=400&fit=crop",
        technologies: ["R"],
        challenges: ["Designing a realistic dataset structure with meaningful, interrelated variables reflecting both psychological and musical factors", "Implementing multi-level models to account for nested structures (e.g., individuals within bands or genres)", "Ensuring model validity despite synthetic data, with careful consideration of variance, collinearity, and interpretability"],
        outcomes: ["Demonstrated the potential of MLM to analyse performance-related psychological data in music populations", "Showed how contextual (e.g., tour status, venue size) and individual (e.g., sleep, caffeine, practice hours) factors interact in panic symptom severity", "Strengthened my skills in modeling complex hierarchical data and designing synthetic research datasets with applied relevance"],
        githubUrl: "https://github.com/0r080r0/PhD-Portfolio/tree/main/Multi-Level_Modelling"
      },
      "practice-optimization": {
        title: "Music Experience Website",
        description: "Developed using R and Quarto, this website showcases my journey as a dedicated, self-taught intermediate musician. It highlights my long-term engagement with musicianship and provides essential context and credibility for my research in musician health.",
        image: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=600&h=400&fit=crop",
        technologies: ["R", "Quarto", "JavaScript", "HTML", "CSS"],
        challenges: ["Learning Quarto as a new tool for web publishing", "Designing a site that effectively balances personal storytelling with professional presentation", "Ensuring the website is accessible and responsive across devices"],
        outcomes: ["Established a professional online presence that reinforces my credibility as a musician-researcher", "Created a resource that bridges practical musicianship with scientific inquiry", "Enhanced my skills in Quarto, supporting future data-driven communication projects"],
        githubUrl: "https://github.com/0r080r0/MusicianHealth_Website",
        demoUrl: "https://evangelia-music.netlify.app/"
      }
    };

    // Modal functions
    function openModal(modalId) {
      const modal = document.getElementById(modalId);
      if (modal) {
        modal.classList.remove('hidden');
        modal.classList.add('flex');
        document.body.style.overflow = 'hidden';
      }
    }

    function closeModal(modalId) {
      const modal = document.getElementById(modalId);
      if (modal) {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
        document.body.style.overflow = 'auto';
      }
    }

    // Project cards
    document.querySelectorAll('.project-card').forEach(card => {
      card.addEventListener('click', function() {
        const projectId = this.getAttribute('data-project-id');
        const project = projectsData[projectId];
        
        if (project) {
          document.getElementById('modal-title').textContent = project.title;
          document.getElementById('modal-image').src = project.image;
          document.getElementById('modal-description').textContent = project.description;
          
          // Technologies
          const techContainer = document.getElementById('modal-technologies');
          techContainer.innerHTML = '';
          project.technologies.forEach(tech => {
            const span = document.createElement('span');
            span.className = 'px-3 py-1 bg-slate-800 text-teal-300 rounded-full text-sm font-medium';
            span.textContent = tech;
            techContainer.appendChild(span);
          });
</script>
          
          // Challenges
          const challengesList = document.getElementById('modal-challenges');
          challengesList.innerHTML = '';
          project.challenges.forEach(challenge => {
            const li = document.createElement('li');
            li.className = 'flex items-start space-x-2';
            li.innerHTML = `<span class="text-teal-400 mt-1">â€¢</span><span>${challenge}</span>`;
            challengesList.appendChild(li);
          });
          
          // Outcomes
          const outcomesList = document.getElementById('modal-outcomes');
          outcomesList.innerHTML = '';
          project.outcomes.forEach(outcome => {
            const li = document.createElement('li');
            li.className = 'flex items-start space-x-2';
            li.innerHTML = `<span class="text-teal-400 mt-1">â€¢</span><span>${outcome}</span>`;
            outcomesList.appendChild(li);
          });
          
          // Links
          const linksContainer = document.getElementById('modal-links');
          linksContainer.innerHTML = '';
          
          if (project.githubUrl && project.githubUrl !== '#') {
            const githubLink = document.createElement('a');
            githubLink.href = project.githubUrl;
            githubLink.target = '_blank';
            githubLink.className = 'px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center space-x-2';
            githubLink.innerHTML = '<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg><span>GitHub</span>';
            linksContainer.appendChild(githubLink);
          }
          
          if (project.demoUrl && project.demoUrl !== '#') {
            const demoLink = document.createElement('a');
            demoLink.href = project.demoUrl;
            demoLink.target = '_blank';
            demoLink.className = 'px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors flex items-center space-x-2';
            demoLink.innerHTML = '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg><span>Live Demo</span>';
            linksContainer.appendChild(demoLink);
          }
          
          openModal('project-modal');
        }
      });
    });

    // Research experience items
    document.querySelectorAll('.research-area-item').forEach(item => {
      item.addEventListener('click', function() {
        const areaIndex = parseInt(this.getAttribute('data-area-index'));
        const area = researchExperiences[areaIndex];
        
        if (area) {
          document.getElementById('research-modal-title').textContent = area.title;
          document.getElementById('research-modal-description').textContent = area.description;
          
          // Tasks
          const tasksList = document.getElementById('research-modal-tasks');
          tasksList.innerHTML = '';
          area.tasks.forEach(task => {
            const li = document.createElement('li');
            li.className = 'flex items-start space-x-2';
            li.innerHTML = `<span class="text-teal-400 mt-1">â€¢</span><span>${task}</span>`;
            tasksList.appendChild(li);
          });
          
          // Challenges
          const challengesList = document.getElementById('research-modal-challenges');
          challengesList.innerHTML = '';
          area.challenges.forEach(challenge => {
            const li = document.createElement('li');
            li.className = 'flex items-start space-x-2';
            li.innerHTML = `<span class="text-teal-400 mt-1">â€¢</span><span>${challenge}</span>`;
            challengesList.appendChild(li);
          });
          
          // Contributions
          const contributionsList = document.getElementById('research-modal-contributions');
          contributionsList.innerHTML = '';
          area.contributions.forEach(contribution => {
            const li = document.createElement('li');
            li.className = 'flex items-start space-x-2';
            li.innerHTML = `<span class="text-teal-400 mt-1">â€¢</span><span>${contribution}</span>`;
            contributionsList.appendChild(li);
          });
          
          openModal('research-modal');
        }
      });
    });

    // Thesis items
    document.querySelectorAll('.thesis-item').forEach(item => {
      item.addEventListener('click', function() {
        const thesisIndex = parseInt(this.getAttribute('data-thesis-index'));
        const thesis = theses[thesisIndex];
        
        if (thesis) {
          document.getElementById('thesis-modal-title').textContent = thesis.title;
          document.getElementById('thesis-modal-type').textContent = thesis.type;
          document.getElementById('thesis-modal-year').textContent = thesis.year;
          document.getElementById('thesis-modal-topic').textContent = thesis.topic;
          
          openModal('thesis-modal');
        }
      });
    });

    // Close modal handlers
    document.getElementById('close-modal').addEventListener('click', () => closeModal('project-modal'));
    document.getElementById('close-research-modal').addEventListener('click', () => closeModal('research-modal'));
    document.getElementById('close-thesis-modal').addEventListener('click', () => closeModal('thesis-modal'));

    // Close on backdrop click
    document.getElementById('project-modal').addEventListener('click', function(e) {
      if (e.target === this) closeModal('project-modal');
    });
    document.getElementById('research-modal').addEventListener('click', function(e) {
      if (e.target === this) closeModal('research-modal');
    });
    document.getElementById('thesis-modal').addEventListener('click', function(e) {
      if (e.target === this) closeModal('thesis-modal');
    });

    // Close on Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeModal('project-modal');
        closeModal('research-modal');
        closeModal('thesis-modal');
      }
    });
  });