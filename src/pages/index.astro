---
import Layout from '../layouts/Layout.astro';

const projects = [
  {
    id: "drummer-posture",
    title: "Drummer Posture Monitoring Application",
    shortDescription: "Real-time posture monitoring for drummers",
    description:
      "A prototype application for real-time monitoring of posture while playing drums. Shows live feedback and helps drummers correct bad postural habits using advanced computer vision techniques.",
    image: "/assets/drums.png",
    tags: ["React", "Python", "OpenPose", "Computer Vision"],
    technologies: ["React", "Python", "OpenPose", "MediaPipe", "TensorFlow"],
    challenges: ["Real-time processing", "Pose accuracy", "User feedback systems"],
    outcomes: [
      "90% accuracy in posture detection",
      "Real-time feedback system",
      "Improved drummer awareness",
    ],
    githubUrl: "https://github.com/0r080r0/WebApp-DrummerPosture",
    demoUrl: "https://0r080r0.github.io/WebApp-DrummerPosture/",
    readTime: "GitHub & Live Demo",
  },
  {
    id: "health-survey",
    title: "Musician Health Survey",
    shortDescription: "Online survey assessing musicians’ mental and physical wellbeing",
    description:
      "Developed a structured, web-based questionnaire to assess musicians’ mental health, physical health, and overall wellbeing. Designed for use in longitudinal studies, the tool enables consistent self-report data collection to support health monitoring and analysis alongside physiological measures. Includes evidence-informed guidance tailored to each domain.",
    image:
      "/assets/survey.png",
    tags: ["Survey Design", "User Research", "PostgreSQL", "Questionnaire", "Longitudinal Studies", "Musician Health"],
    technologies: ["R", "JavaScript", "HTML", "CSS"],
    challenges: [
      "Designing questions that balance clinical relevance with accessibility",
      "Creating tailored, evidence-based guidance without exceeding the scope of non-clinical tools",
      "Ensuring future compatibility with multimodal datasets",
    ],
    outcomes: [
      "Built a flexible survey tool for structured assessment of musician health",
      "Enables longitudinal self-report data collection for research and health monitoring",
      "Supports integration of subjective health metrics into broader musician wellbeing analyses",
    ],
    githubUrl: "https://github.com/0r080r0/PhD-Portfolio/tree/main/Questionnaire_MusicianHealth",
    readTime: "GitHub",
  },
  {
    id: "biomechanical-analysis",
    title: "Biomechanical Analysis (EMG)",
    shortDescription: "Muscle activity pattern analysis for injury prevention",
    description:
      "Independently developed skills in electromyography analysis to identify early musculoskeletal risk factors such as tension and inefficient muscle coordination in drummers. This enables detection of potential injury risks in real-time performance scenarios and supports evidence-based injury and pain prevention interventions - aiming to improve physical health by preventing musculoskeletal disorders common in musicians.",
    image:
      "/assets/emg.png",
    tags: ["EMG", "Computer Vision", "Biomechanics", "Data Analysis"],
    technologies: ["R", "Python", "EMG"],
    challenges: [
      "Extracting meaningful muscle contraction signals from noisy simulated EMG data",
      "Translating complex EMG signals into actionable insights for biofeedback and targeted interventions",
      "Detecting and quantifying co-contractions linked to muscular inefficiency",
    ],
    outcomes: [
      "Independently developed practical skills in EMG signal processing relevant to musician health research",
      "Supports my PhD proposal's focus on musicians' injury and pain prevention via evidence-based interventions",
      "Provides a foundation for understanding muscle function and guiding targeted prevention strategies",
    ],
    githubUrl: "https://github.com/0r080r0/PhD-Portfolio/tree/main/EMG_DataAnalysis",
    readTime: "GitHub",
  },
  {
    id: "machine-learning",
    title: "ML-Based Injury Risk and Pain Prediction (in Progress)",
    shortDescription:
      "ML algorithm for prediction of performance-related musculoskeletal injuries",
    description:
      "This prospective project will apply machine learning techniques to analyse electromyography (EMG) signals, biomechanical data, and subjective measures to both detect early signs of injury risk and predict future injury and pain outcomes in musicians. By integrating multimodal data sources, the model will aim to enable individualised interventions that improve musician health and performance longevity.",
    image:
      "assets/violin.jpg",
    tags: ["R", "Python", "Predictive Modelling", "Machine Learning", "Injury", "Pain", "Performance Metrics"],
    technologies: ["R", "Python", "PostgreSQL", "Streamlit", "TensorFlow", "React", "Signal Processing", "Machine Learning", "Biomechanics"],
    challenges: ["Metric standardisation", "Performance correlation", "Visual analytics"],
    outcomes: [
      "Measurable improvement in practice efficiency",
      "Performance tracking dashboard",
    ],
    githubUrl: "#",
    demoUrl: "#",
    readTime: "GitHub",
  },
  {
    id: "multi-level-model",
    title: "Multi-Level Modeling",
    shortDescription: "Multi-Level Modeling for Panic Symptoms and Performance Anxiety in Drummers",
    description:
      "This project applied multi-level modeling (MLM) techniques to an AI-generated dataset designed with domain-specific input to simulate panic symptoms and contextual factors in drummers. This synthetic dataset was structured around realistic variables selected based on research literature. Variables included panic symptom indicators, lifestyle habits, performance context, and musical background.",
    image:
      "assets/fear.png",
    tags: ["R", "MLM", "Statistics", "Performance Anxiety", "Panic Symptoms"],
    technologies: ["R"],
    challenges: [
      "Designing a realistic dataset structure with meaningful, interrelated variables",
      "Implementing multi-level models to account for nested structures",
      "Ensuring model validity, with careful consideration of variance, collinearity, and interpretability",
    ],
    outcomes: [
      "Analysed performance-related psychological data in music populations using MLM",
      "Showed how contextual and individual factors interact in panic symptom severity",
      "Strengthened my skills in modeling complex hierarchical data and designing synthetic research datasets with applied relevance",
    ],
    githubUrl: "https://github.com/0r080r0/PhD-Portfolio/tree/main/Multi-Level_Modelling",
    readTime: "GitHub",
  },
  {
    id: "music-experience-website",
    title: "Music Experience Website",
    shortDescription: "A self-developed website showcasing my music experience",
    description:
      "Developed using R and Quarto, this website showcases my journey as a dedicated, self-taught intermediate musician. It highlights my long-term engagement with musicianship and provides essential context and credibility for my research in musician health.",
    image:
      "/assets/drum.png",
    tags: ["R", "Quarto", "Web Development", "Musicianship", "Music Industry"],
    technologies: ["R", "Quarto", "JavaScript", "HTML", "CSS"],
    challenges: [
      "Learning Quarto as a new tool for web publishing",
      "Designing a website that effectively balances personal storytelling with professional presentation",
      "Ensuring accessibility and responsive design across devices",
    ],
    outcomes: [
      "Established a professional online presence that reinforces my credibility as a musician-researcher",
      "Created a resource that bridges practical musicianship with scientific inquiry",
      "Enhanced my skills in Quarto for future data-driven communication projects",
    ],
    githubUrl: "https://github.com/0r080r0/MusicianHealth_Website",
    demoUrl: "https://evangelia-music.netlify.app/",
    readTime: "GitHub & Demo",
  },
];

---

<Layout title="Evangelia Karakoliou - PhD Portfolio">
  <head>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  </head>
  <main class="h-screen bg-black flex overflow-hidden relative">
    <!-- Background Layer: Solid black background -->
    <div class="absolute inset-0 bg-black"></div>

    <!-- Background Image Layer: Transparent Tatras Background Image -->
    <div
      class="absolute inset-0 bg-cover bg-center bg-no-repeat opacity-40"
      style="background-image: url('/assets/Tatras.jpg'); z-index: 1;"
    ></div>

    <!-- Content Layer: All content above the background -->
    <div class="relative z-10 w-full flex">
      <!-- Left Sidebar -->
      <aside class="w-48 bg-black/80 backdrop-blur-sm border-r border-gray-700 p-4 flex flex-col mt-32">
        <nav class="space-y-6">
          <!-- Research Experience -->
          <div>
  <h3 class="text-xs font-semibold text-white mb-2 tracking-wide uppercase opacity-90">
    Research Experience
  </h3>
  <div class="space-y-2">
    <div class="thesis-item cursor-pointer" data-thesis-index="1">
      <div class="p-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors">
        <div class="flex items-center justify-between">
          <div class="text-xs font-medium text-white">MSc Thesis</div>
          <svg class="w-3 h-3 text-gray-400 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
          </svg>
        </div>
        <div class="text-xs text-gray-400 mt-0.5 opacity-70">2023 • Master in Psychological Science</div>
      </div>
    </div>
    <div class="research-area-item cursor-pointer" data-area-index="1">
      <div class="p-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors">
        <div class="flex items-center justify-between">
          <div class="text-xs font-medium text-white">MSc Research Practicum</div>
          <svg class="w-3 h-3 text-gray-400 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
          </svg>
        </div>
        <div class="text-xs text-gray-400 mt-0.5 opacity-70">Meta-Analysis: Music Listening Effects on Cognitive and Physical Performance</div>
      </div>
    </div>
    <div class="thesis-item cursor-pointer" data-thesis-index="0">
      <div class="p-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors">
        <div class="flex items-center justify-between">
          <div class="text-xs font-medium text-white">BSc Thesis</div>
          <svg class="w-3 h-3 text-gray-400 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
          </svg>
        </div>
        <div class="text-xs text-gray-400 mt-0.5 opacity-70">2021 • Bachelor in Psychology</div>
      </div>
    </div>
    <div class="research-area-item cursor-pointer" data-area-index="0">
      <div class="p-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors">
        <div class="flex items-center justify-between">
          <div class="text-xs font-medium text-white">BSc Research Assistant</div>
          <svg class="w-3 h-3 text-gray-400 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
          </svg>
        </div>
        <div class="text-xs text-gray-400 mt-0.5 opacity-70">Experimental Neuroscience</div>
      </div>
    </div>
  </div>
</div>

          <!-- Quick Links -->
          <div>
            <h3
              class="text-xs font-semibold text-white mb-2 tracking-wide uppercase opacity-90"
            >
              Quick Links
            </h3>
            <div class="space-y-2">
              <a
                href="https://github.com/0r080r0"
                class="flex items-center gap-2 text-xs text-gray-300 hover:text-white transition-colors opacity-80 hover:opacity-100"
              >
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
                </svg>
                GitHub</a>
              <a
                href="https://www.linkedin.com/in/lia-88oo/"
                class="flex items-center gap-2 text-xs text-gray-300 hover:text-white transition-colors opacity-80 hover:opacity-100"
              > 
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                </svg>
                LinkedIn
              </a>
            </div>
          </div>
        </nav>
      </aside>

      <!-- Main Content -->
      <div class="flex-1 flex flex-col">
        <!-- Header -->
        <header
          class="w-full px-6 py-4 bg-black/50 backdrop-blur-sm border-b border-gray-700"
        >
          <div class="w-full text-center">
            <h1 class="text-3xl font-light text-white mb-2">
              Evangelia Karakoliou
            </h1>
            <div class="intro-text opacity-0 space-y-1 text-gray-300">
              <p class="text-base opacity-90">PhD Candidate in Musician Health</p>
              <p class="text-sm opacity-80">
                Bridging the gap between research, technology and human performance
              </p>
              <p class="text-xs italic opacity-70">
                Dedicated to preventing and managing musicians' injuries and pain through evidence-based interventions
              </p>
            </div>
          </div>
        </header>

        <!-- Projects Grid -->
        <div class="flex-1 px-6 py-8 flex items-center">
          <div class="max-w-6xl mx-auto w-full">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 auto-rows-min">
              {projects.map((project, index) => (
                <div
                  class="project-card group relative bg-black/15 backdrop-blur-sm rounded-xl overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer border border-gray-700/50 hover:border-gray-500/70 flex flex-col h-50"
                  data-project-id={project.id}
                  key={index}
                >
                  <!-- Image container -->
                  <div class="h-32 relative overflow-hidden flex-shrink-0">
                    <img
                      src={project.image}
                      alt={project.title}
                      class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                    />
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"></div>
                    <div class="absolute bottom-3 left-3 text-white">
                      <h3 class="font-medium text-sm mb-1">{project.title}</h3>
                    </div>
                  </div>
                  
                  <div class="p-3 flex flex-col justify-between bg-black/10 backdrop-blur-sm flex-1">
  
  <!-- Tags -->
  <div class="flex flex-wrap gap-1 mb-2">
    {project.tags.slice(0, 3).map((tag, i) => (
      <span
        class="px-2 py-0.5 bg-slate-800/80 text-teal-300 rounded-full text-[11px] font-medium backdrop-blur-sm"
        key={i}
      >
        {tag}
      </span>
    ))}
    {project.tags.length > 3 && (
      <span class="px-2 py-0.5 bg-slate-600/80 text-gray-300 rounded-full text-[11px] font-medium backdrop-blur-sm">
        +{project.tags.length - 3}
      </span>
    )}
  </div>
                  
  <!-- GitHub/Demo buttons -->
  <div class="flex gap-1">
    {project.githubUrl && project.githubUrl !== "#" && (
      <a
        href={project.githubUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="flex items-center gap-1 px-2 py-1 bg-gray-800/80 text-gray-200 rounded text-xs hover:bg-gray-700/80 transition-colors"
        onclick="event.stopPropagation()"
      >
        <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 0C5.374 0 0 5.373 0 12 0 17.302 3.438 21.8 8.207 23.387c.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/>
        </svg>
        GitHub
      </a>
    )}
    {project.demoUrl && project.demoUrl !== "#" && (
      <a
        href={project.demoUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="flex items-center gap-1 px-2 py-1 bg-[#f5a623]/80 text-white rounded text-xs hover:bg-[#d48806]/90 transition-colors"
        onclick="event.stopPropagation()"
      >
        <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
          <path d="M8 5v14l11-7z"/>
        </svg>
        Demo
      </a>
    )}
  </div>
</div>
                    
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Project Modal -->
    <div
      id="project-modal"
      class="fixed inset-0 bg-black/70 backdrop-blur-sm hidden items-center justify-center z-50 p-4"
    >
      <div
        class="bg-black/90 border border-gray-700 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"
      >
        <div
          class="sticky top-0 bg-black/90 border-b border-gray-700 p-6 flex items-center justify-between"
        >
          <h2 id="modal-title" class="text-2xl font-semibold text-white"></h2>
          <button
            id="close-modal"
            class="text-gray-400 hover:text-white transition-colors"
            aria-label="Close project modal"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              ></path>
            </svg>
          </button>
        </div>

        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <img
                id="modal-image"
                class="w-full h-64 object-cover rounded-lg mb-4"
              />
              <p id="modal-description" class="text-gray-300 leading-relaxed"></p>
            </div>

            <div class="space-y-6">
              <div>
                <h3 class="text-lg font-semibold text-white mb-3">
                  Technologies Used
                </h3>
                <div id="modal-technologies" class="flex flex-wrap gap-2"></div>
              </div>

              <div>
                <h3 class="text-lg font-semibold text-white mb-3">Key Challenges</h3>
                <ul id="modal-challenges" class="space-y-2 text-gray-300"></ul>
              </div>

              <div>
                <h3 class="text-lg font-semibold text-white mb-3">
                  Outcomes & Impact
                </h3>
                <ul id="modal-outcomes" class="space-y-2 text-gray-300"></ul>
              </div>

              <div id="modal-links" class="flex gap-3 pt-4 border-t border-gray-700"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Research Experience Modal -->
    <div
      id="research-modal"
      class="fixed inset-0 bg-black/70 backdrop-blur-sm hidden items-center justify-center z-50 p-4"
    >
      <div
        class="bg-black/90 border border-gray-700 rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"
      >
        <div
          class="sticky top-0 bg-black/90 border-b border-gray-700 p-6 flex items-center justify-between"
        >
          <h2 id="research-modal-title" class="text-2xl font-semibold text-white"></h2>
          <button
            id="close-research-modal"
            class="text-gray-400 hover:text-white transition-colors"
            aria-label="Close research modal"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              ></path>
            </svg>
          </button>
        </div>

        <div class="p-6">
          <div class="space-y-6">
            <div>
              <p
                id="research-modal-description"
                class="text-gray-300 leading-relaxed text-lg"
              ></p>
            </div>

            <div>
              <h3 class="text-lg font-semibold text-white mb-3">Key Tasks</h3>
              <ul id="research-modal-tasks" class="space-y-2 text-gray-300"></ul>
            </div>

            <div>
              <h3 class="text-lg font-semibold text-white mb-3">Challenges</h3>
              <ul id="research-modal-challenges" class="space-y-2 text-gray-300"></ul>
            </div>

            <div>
              <h3 class="text-lg font-semibold text-white mb-3">Contributions</h3>
              <ul
                id="research-modal-contributions"
                class="space-y-2 text-gray-300"
              ></ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Thesis Modal -->
    <div
      id="thesis-modal"
      class="fixed inset-0 bg-black/70 backdrop-blur-sm hidden items-center justify-center z-50 p-4"
    >
      <div
        class="bg-black/90 border border-gray-700 rounded-2xl max-w-7xl w-full max-h-[90vh] overflow-y-auto"
      >
        <div
          class="sticky top-0 bg-black/90 border-b border-gray-700 p-6 flex items-center justify-between"
        >
          <h2 id="thesis-modal-title" class="text-2xl font-light text-white font-inter"></h2>
          <button
            id="close-thesis-modal"
            class="text-gray-400 hover:text-white transition-colors"
            aria-label="Close thesis modal"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              ></path>
            </svg>
          </button>
        </div>
        <div class="p-6">
          <!-- 2-Column Layout: 50% content, 50% gallery -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- Left Column: Academic Information -->
            <div class="space-y-6">
              <!-- Essential Details -->
              <div class="grid grid-cols-2 gap-4 p-4 bg-white/5 rounded-lg border border-gray-700/50">
                <div>
                  <h3 class="text-xs font-medium text-gray-400 uppercase tracking-wide mb-1 font-inter">Degree</h3>
                  <p id="thesis-modal-type" class="text-white font-light font-inter text-sm"></p>
                </div>
                <div>
                  <h3 class="text-xs font-medium text-gray-400 uppercase tracking-wide mb-1 font-inter">Year</h3>
                  <p id="thesis-modal-year" class="text-white font-light font-inter text-sm"></p>
                </div>
              </div>

              <!-- Research Focus -->
              <div>
                <h3 class="text-base font-medium text-white mb-3 border-b border-gray-700 pb-2 font-inter">Research Topic</h3>
                <p id="thesis-modal-topic" class="text-gray-300 leading-relaxed text-sm font-inter font-light"></p>
              </div>

              <!-- Research Questions -->
              <div id="thesis-research-questions-section" style="display: none;">
                <h3 class="text-base font-medium text-white mb-3 border-b border-gray-700 pb-2 font-inter">Research Questions</h3>
                <p id="thesis-modal-research-questions" class="text-gray-300 leading-relaxed text-sm font-inter font-light"></p>
              </div>

              <!-- Hypotheses -->
              <div id="thesis-hypotheses-section" style="display: none;">
                <h3 class="text-base font-medium text-white mb-3 border-b border-gray-700 pb-2 font-inter">Hypotheses</h3>
                <p id="thesis-modal-hypotheses" class="text-gray-300 leading-relaxed text-sm font-inter font-light"></p>
              </div>

              <!-- Methodology -->
              <div id="thesis-tasks-section" style="display: none;">
                <h3 class="text-base font-medium text-white mb-3 border-b border-gray-700 pb-2 font-inter">Methodology & Key Tasks</h3>
                <ul id="thesis-modal-tasks" class="space-y-2 text-gray-300 text-sm font-inter font-light"></ul>
              </div>

              <!-- Challenges & Limitations -->
              <div id="thesis-challenges-section" style="display: none;">
                <h3 class="text-base font-medium text-white mb-3 border-b border-gray-700 pb-2 font-inter">Challenges & Limitations</h3>
                <ul id="thesis-modal-challenges" class="space-y-2 text-gray-300 text-sm font-inter font-light"></ul>
              </div>

              <!-- Contributions & Impact -->
              <div id="thesis-contributions-section" style="display: none;">
                <h3 class="text-base font-medium text-white mb-3 border-b border-gray-700 pb-2 font-inter">Key Contributions</h3>
                <ul id="thesis-modal-contributions" class="space-y-2 text-gray-300 text-sm font-inter font-light"></ul>
              </div>
            </div>

            <!-- Right Column: Large Gallery (50% width) -->
            <div>
              <div id="thesis-images-section" style="display: none;">
                <h3 class="text-base font-medium text-white mb-4 border-b border-gray-700 pb-2 font-inter">Research Visualisations</h3>
                
                <!-- Large Gallery -->
                <div class="bg-black/40 rounded-lg border border-gray-700/50 overflow-hidden">
                  <!-- Main Display - Much Larger -->
                  <div class="relative h-96 bg-gray-900 group">
                    <img 
                      id="gallery-main-image" 
                      src="" 
                      alt="" 
                      class="w-full h-full object-contain transition-all duration-300"
                    />
                    
                    <!-- Navigation Arrows -->
                    <button 
                      id="gallery-prev" 
                      class="absolute left-3 top-1/2 transform -translate-y-1/2 bg-black/80 hover:bg-black/95 text-white rounded-full p-3 transition-all duration-200 opacity-0 group-hover:opacity-100"
                    >
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                      </svg>
                    </button>
                    <button 
                      id="gallery-next" 
                      class="absolute right-3 top-1/2 transform -translate-y-1/2 bg-black/80 hover:bg-black/95 text-white rounded-full p-3 transition-all duration-200 opacity-0 group-hover:opacity-100"
                    >
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                      </svg>
                    </button>
                    
                    <!-- Counter -->
                    <div class="absolute top-4 right-4 bg-black/80 text-white px-3 py-1.5 rounded-full text-xs font-inter">
                      <span id="gallery-counter">1/1</span>
                    </div>
                  </div>
                  
                  <!-- Thumbnail Navigation Strip -->
                  <div class="p-4 bg-black/20">
                    <div id="gallery-thumbnails" class="flex gap-2 overflow-x-auto pb-2">
                      <!-- Thumbnails inserted here -->
                    </div>
                  </div>
                  
                  <!-- Caption -->
                  <div class="px-4 pb-4 border-t border-gray-700/50 pt-4">
                    <p id="gallery-caption" class="text-sm text-gray-300 text-center leading-relaxed font-inter font-light"></p>
                  </div>
                </div>

                <!-- Additional Context -->
                <div class="mt-4 p-3 bg-blue-900/20 border border-blue-700/30 rounded-lg">
                  <p class="text-xs text-blue-300 leading-relaxed font-inter font-light">
                    <span class="font-medium">Visual Evidence:</span> These figures support the research methodology and demonstrate key findings from the analysis.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</Layout>

<style>
  .project-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  .project-card:hover {
    transform: translateY(-2px);
  }
  
  /* Allow line clamping for text overflow */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  #project-modal {
    display: none;
  }
  #project-modal.active {
    display: flex;
  }
  #research-modal {
    display: none;
  }
  #research-modal.active {
    display: flex;
  }
  #thesis-modal {
    display: none;
  }
  #thesis-modal.active {
    display: flex;
  }
  .intro-text {
    animation: fadeIn 2s ease-in-out 0.5s forwards;
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Compact gallery styles */
  .gallery-container {
    transition: all 0.3s ease;
  }

  .gallery-container:hover .gallery-nav {
    opacity: 1;
  }

  #gallery-thumbnails {
    scrollbar-width: thin;
    scrollbar-color: #4B5563 transparent;
  }

  #gallery-thumbnails::-webkit-scrollbar {
    height: 4px;
  }

  #gallery-thumbnails::-webkit-scrollbar-thumb {
    background: #4B5563;
    border-radius: 2px;
  }

  .gallery-thumbnail {
    width: 40px;
    height: 30px;
    object-fit: cover;
    border-radius: 4px;
    cursor: pointer;
    opacity: 0.5;
    transition: all 0.2s;
    flex-shrink: 0;
    border: 1px solid transparent;
  }

  .gallery-thumbnail:hover {
    opacity: 0.8;
    transform: scale(1.05);
  }

  .gallery-thumbnail.active {
    opacity: 1;
    border-color: #10b981;
    box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.3);
  }

  /* Academic content styling */
  .thesis-modal h3 {
    position: relative;
  }

  .thesis-modal li {
    padding-left: 1rem;
    position: relative;
  }

  .thesis-modal li::before {
    content: "→";
    position: absolute;
    left: 0;
    color: #6B7280;
    font-weight: bold;
  }

  /* Font styling for sidebar and cards */
  .font-inter {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  }

  /* Sidebar styling */
  aside {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  }

  aside h3 {
    font-size: 10px !important;
    font-weight: 500;
    letter-spacing: 0.05em;
  }

  aside .text-xs {
    font-size: 11px !important;
    font-weight: 300;
  }

  aside .text-gray-400 {
    font-size: 10px !important;
    font-weight: 300;
  }

  /* Project cards styling */
  .project-card h3 {
    font-family: 'Inter', sans-serif !important;
    font-size: 13px !important;
    font-weight: 400 !important;
  }

  .project-card .text-xs {
    font-size: 10px !important;
    font-weight: 300 !important;
  }

  .project-card span {
    font-size: 9px !important;
    font-weight: 300 !important;
  }

  /* Enhanced gallery specific styles - override original */
  .gallery-thumbnail {
    width: 60px;
    height: 45px;
    object-fit: cover;
    border-radius: 6px;
    cursor: pointer;
    opacity: 0.6;
    transition: all 0.3s ease;
    flex-shrink: 0;
    border: 2px solid transparent;
  }

  .gallery-thumbnail:hover {
    opacity: 0.9;
    transform: scale(1.05);
  }

  .gallery-thumbnail.active {
    opacity: 1;
    border-color: #10b981;
    box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.4);
  }

  /* Different colors for different list types */
  #thesis-modal-tasks li::before {
    color: #60A5FA;
  }

  #thesis-modal-challenges li::before {
    color: #F87171;
  }

  #thesis-modal-contributions li::before {
    color: #34D399;
  }
</style>

<script client:load>
  const projectsData = {
    "drummer-posture": {
      title: "Drummer Posture Monitoring Application",
      description:
        "A prototype web application developed to support injury prevention in drummers by addressing poor postural habits - a well-documented risk factor for performance-related musculoskeletal disorders. Using OpenPose for real-time pose estimation, the system provides immediate visual feedback on upper-body alignment during playing, helping users identify and correct suboptimal posture through an intuitive, user-friendly interface.",
      image: "/assets/drums.png",
      technologies: [
        "OpenPose",
        "Computer Vision",
        "React",
        "Python",
        "TensorFlow",
        "JavaScript",
        "HTML",
        "CSS",
      ],
      challenges: [
        "Creating real-time, evidence-based posture quality metrics",
        "Ensuring accurate feedback despite variable lighting and rapid movement",
        "Handling occlusion from drumsticks and equipment that disrupts keypoint detection",
      ],
      outcomes: [
        "Created a real-time posture feedback web application",
        "Applied existing computer vision tools",
        "Next: develop session tracking and validate posture metrics for injury prevention",
      ],
      githubUrl: "https://github.com/0r080r0/WebApp-DrummerPosture",
      demoUrl: "https://0r080r0.github.io/WebApp-DrummerPosture/",
    },
    "health-survey": {
      title: "Musician Health Survey",
      description:
        "Developed a structured, web-based questionnaire to assess musicians' mental health, physical health, and overall wellbeing. Designed for use in longitudinal studies, the tool enables consistent self-report data collection to support health monitoring and analysis alongside physiological measures. Includes evidence-informed guidance tailored to each domain.",
      image:
        "/assets/survey.png",
      technologies: ["R", "JavaScript", "HTML", "CSS"],
      challenges: [
        "Designing questions that balance clinical relevance with accessibility",
        "Creating tailored, evidence-based guidance without exceeding the scope of non-clinical tools",
        "Ensuring future compatibility with multimodal data",
      ],
      outcomes: [
        "Built a flexible survey tool for structured assessment of musician health",
        "Enables longitudinal self-report data collection for research and health monitoring",
        "Supports integration of subjective health metrics into broader musician wellbeing analyses",
      ],
      githubUrl: "https://github.com/0r080r0/PhD-Portfolio/tree/main/Questionnaire_MusicianHealth",
    },
    "biomechanical-analysis": {
      title: "Biomechanical Movement Analysis",
      description:
        "Independently developed skills in electromyography analysis to identify early musculoskeletal risk factors such as tension and inefficient muscle coordination in drummers. This enables detection of potential injury risks in real-time performance scenarios and supports evidence-based injury and pain prevention interventions - aiming to improve physical health by preventing musculoskeletal disorders common in musicians.",
      image:
        "/assets/emg.png",
      technologies: ["R", "Python", "EMG"],
      challenges: [
        "Extracting meaningful muscle contraction signals from noisy simulated EMG data",
        "Translating complex EMG signals into actionable insights for biofeedback and targeted interventions",
        "Detecting and quantifying co-contractions linked to muscular inefficiency",
      ],
      outcomes: [
        "Independently developed practical skills in EMG signal processing relevant to musician health research",
        "Supports my PhD proposal's focus on musicians' injury and pain prevention via evidence-based interventions",
        "Provides a foundation for understanding muscle function and guiding targeted prevention strategies",
      ],
      githubUrl: "https://github.com/0r080r0/PhD-Portfolio/tree/main/EMG_DataAnalysis",
    },
    "machine-learning": {
      title: "ML-Based Injury Risk and Pain Prediction (in Progress)",
      description:
        "This prospective project will apply machine learning techniques to analyse electromyography (EMG) signals, biomechanical data, and subjective measures to predict future injury and pain outcomes in musicians. By integrating multimodal data sources, the model will aim to enable proactive, personalised interventions that improve musician health and performance longevity.",
      image:
        "assets/violin.jpg",
      technologies: ["R", "Python", "PostgreSQL", "Streamlit", "TensorFlow", "React", "Signal Processing", "Machine Learning", "Biomechanics"],
      challenges: [
        "Standardising performance metrics across instruments",
        "Correlating practice data with performance improvement",
        "Creating intuitive visual analytics",
      ],
      outcomes: [
        "Measurable improvement in practice efficiency",
        "Personalised learning paths for students",
        "Interactive performance tracking dashboard",
      ],
      githubUrl: "#",
      demoUrl: "#",
    },
    "multi-level-model": {
      title: "Multi-Level Modeling for Panic Symptoms and Performance Anxiety in Drummers",
      description:
        "This project applied multi-level modeling (MLM) techniques to an AI-generated dataset designed with domain-specific input to simulate panic symptoms and contextual factors in drummers. This synthetic dataset was structured around realistic variables selected based on research literature. Variables included panic symptom indicators, lifestyle habits, performance context, and musical background.",
      image:
        "assets/fear.png",
      technologies: ["R"],
      challenges: [
        "Designing a realistic dataset structure with meaningful, interrelated variables",
        "Implementing multi-level models to account for nested structures",
        "Ensuring model validity, with careful consideration of variance, collinearity, and interpretability",
      ],
      outcomes: [
        "Analysed performance-related psychological data in music populations using MLM",
        "Showed how contextual and individual factors interact in panic symptom severity",
        "Strengthened my skills in modeling complex hierarchical data and designing synthetic research datasets with applied relevance",
      ],
      githubUrl: "https://github.com/0r080r0/PhD-Portfolio/tree/main/Multi-Level_Modelling",
    },
    "music-experience-website": {
      title: "Music Experience Website",
      description:
        "Developed using R and Quarto, this website showcases my journey as a dedicated, self-taught intermediate musician. It highlights my long-term engagement with musicianship and provides essential context and credibility for my research in musician health.",
      image:
        "/assets/drum.png",
      technologies: ["R", "Quarto", "JavaScript", "HTML", "CSS"],
      challenges: [
        "Learning Quarto as a new tool for web publishing",
        "Designing a website that effectively balances personal storytelling with professional presentation",
        "Ensuring accessibility and responsive design across devices",
      ],
      outcomes: [
        "Established a professional online presence that reinforces my credibility as a musician-researcher",
        "Created a resource that bridges practical musicianship with scientific inquiry",
        "Enhanced my skills in Quarto for future data-driven communication projects",
      ],
      githubUrl: "https://github.com/0r080r0/MusicianHealth_Website",
      demoUrl: "https://evangelia-music.netlify.app/",
    },
  };

  const theses = [
    {
      title: "BSc Thesis",
      year: "2021",
      type: "Bachelor in Psychology",
      focus: "Performance Psychology",
      topic: "Online Experiment: The role of mental toughness on the relationship between goal focus and peak performance",
      tasks: ["Online experiment design", "Statistical analysis", "Peak performance assessment"],
      challenges: ["Participant recruitment", "Mental toughness measurement", "Online data quality", "Manipulation Check"],
      contributions: ["Goal focus-performance relationship", "Mental toughness insights", "Online experiment methodology", "Video creation of results"],
      images: [
        {
          src: "/assets/scales.png",
          caption: "Scales and subscales: Overview of all used scales and subscales in the study"
        },
        {
          src: "/assets/process.png",
          caption: "Process focus condition: Goal focus manipulation for the process focus condition. The quote „Focus on your progress, it's all about the journey.“ was presented above the picture. Participants were deliberately not asked to engage with the picture."
        },
        {
          src: "/assets/goal.png",
          caption: "Goal focus condition: Goal focus manipulation for the outcome focus condition. The quote „Focus on your outcome, it's all about the final result“ was displayed above the picture. Participants were willfully not asked to deal with the picture."
        }
      ]
    },
    
    {
      title: "MSc Thesis",
      year: "2023",
      type: "Master in Psychological Science",
      focus: "Neuro Motor Rehabilitation",
      topic: "Meta-Analysis: Music listening effects on motor rehabilitation in Parkinson's Disease",
      research_questions: "",
      hypotheses: "",
      tasks: ["Meta-analytic review", "Effect size synthesis", "Clinical interpretation"],
      challenges: ["Study heterogeneity", "Small Study Effects", "Outcome standardisation", "Clinical significance"],
      contributions: ["Evidence synthesis", "Clinical recommendations", "Future research directions"],
      images: [
        {
          src: "/assets/motricity.png",
          caption: "Music-Motricity Model: Conceptual framework showing how music listening may influence motor function"
        },
        {
          src: "/assets/flowchart.png",
          caption: "PRISMA Flow Chart: Systematic literature search and study selection process"
        },
        {
          src: "/assets/walk.png",
          caption: "Walking Performance: Meta-analysis results showing effect sizes across studies"
        },
        {
          src: "/assets/updrs.png",
          caption: "UPDRS-III Scores: Meta-analysis results showing effect sizes across studies"
        },
        {
          src: "/assets/cadence.png",
          caption: "Gait Cadence: Meta-analysis results showing effect sizes across studies"
        }
      ]
    },
  ];

  // Research Experience Array
  const researchExperiences = [
    {
      title: "BSc Research Assistant - Experimental Neuroscience",
      description: "Worked as a research assistant in experimental neuroscience, contributing to studies investigating neural mechanisms and cognitive processes in audiovisual working memory.",
      tasks: [
        "Assisted with experimental setup, preparation of the lab and calibration of the EEG equipment",
        "Collected and analysed neurophysiological data using MATLAB",
        "Supported participant recruitment and data management"
      ],
      challenges: [
        "Learning complex neurophysiological measurement techniques",
        "Ensuring experimental protocols were followed precisely"
      ],
      contributions: [
        "Contributed to data collection and data analysis in MATLAB for published research",
        "Developed skills in experimental neuroscience methods (EEG)",
        "Gained experience in research ethics and participant safety"
      ]
    },
    {
      title: "MSc Research Practicum - Meta-Analysis",
      description: "Contributed to a comprehensive meta-analysis examining the effects of music listening on cognitive and physical performance across various populations and contexts.",
      tasks: [
        "Systematic literature search across multiple databases",
        "Creation of a coding scheme and coding sheet",
        "Study selection and quality assessment using standardised criteria"
      ],
      challenges: [
        "Determining key selection criteria for articles",
        "Independent rater coding of articles",
        "Discussion of articles with different independent rater codings for inclusion"
      ],
      contributions: [
        "Identified gaps in current research for future investigation",
        "Developed expertise in systematic review methodology"
      ]
    }
  ];

  // Modal elements - declared but will be assigned in setupEventListeners
  let modal, modalTitle, modalImage, modalDescription, modalTechnologies, modalChallenges, modalOutcomes, modalLinks, closeModal;
  let researchModal, researchModalTitle, researchModalDescription, researchModalTasks, researchModalChallenges, researchModalContributions, closeResearchModal;
  let thesisModal, thesisModalTitle, thesisModalType, thesisModalYear, thesisModalTopic, closeThesisModal;

  // Gallery variables
  let galleryImages = [];
  let currentImageIndex = 0;

  // Handler to show Project Modal
  function showModal(project) {
    if (!modal || !modalTitle) return; // Safety check

    modalTitle.textContent = project.title;
    modalImage.src = project.image;
    modalImage.alt = project.title;
    modalDescription.textContent = project.description;

    // Technologies
    modalTechnologies.innerHTML = "";
    project.technologies.forEach((tech) => {
      const span = document.createElement("span");
      span.className = "px-2 py-0.5 bg-slate-800/80 text-teal-300 rounded-full text-xs font-medium backdrop-blur-sm";
      span.textContent = tech;
      modalTechnologies.appendChild(span);
    });

    // Challenges
    modalChallenges.innerHTML = "";
    project.challenges.forEach((challenge) => {
      const li = document.createElement("li");
      li.className = "flex items-start space-x-2";
      li.innerHTML = `<span class="text-red-400 mt-1">•</span><span>${challenge}</span>`;
      modalChallenges.appendChild(li);
    });

    // Outcomes
    modalOutcomes.innerHTML = "";
    project.outcomes.forEach((outcome) => {
      const li = document.createElement("li");
      li.className = "flex items-start space-x-2";
      li.innerHTML = `<span class="text-green-400 mt-1">•</span><span>${outcome}</span>`;
      modalOutcomes.appendChild(li);
    });

    // Links
    modalLinks.innerHTML = "";
    if (project.githubUrl && project.githubUrl !== "#") {
      const githubLink = document.createElement("a");
      githubLink.href = project.githubUrl;
      githubLink.target = "_blank";
      githubLink.rel = "noopener noreferrer";
      githubLink.className = "flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors border border-gray-600";
      githubLink.innerHTML = `
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 0C5.374 0 0 5.373 0 12 0 17.302 3.438 21.8 8.207 23.387c.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/>
        </svg>
        GitHub
      `;
      modalLinks.appendChild(githubLink);
    }

    if (project.demoUrl && project.demoUrl !== "#") {
      const demoLink = document.createElement("a");
      demoLink.href = project.demoUrl;
      demoLink.target = "_blank";
      demoLink.rel = "noopener noreferrer";
      demoLink.className = "flex items-center gap-2 px-4 py-2 bg-green-800 text-white rounded-lg hover:bg-green-700 transition-colors border border-green-600";
      demoLink.innerHTML = `
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
          <path d="M8 5v14l11-7z"/>
        </svg>
        Live Demo
      `;
      modalLinks.appendChild(demoLink);
    }

    modal.classList.add("active");
    document.body.style.overflow = "hidden";
  }

  // Handler to hide Project Modal
  function hideModal() {
    if (!modal) return;
    modal.classList.remove("active");
    document.body.style.overflow = "auto";
  }

  // Research Modal show
  function showResearchModal(researchArea) {
    if (!researchModal) return;

    researchModalTitle.textContent = researchArea.title;
    researchModalDescription.textContent = researchArea.description;

    // Tasks
    researchModalTasks.innerHTML = "";
    researchArea.tasks.forEach((task) => {
      const li = document.createElement("li");
      li.className = "flex items-start space-x-2";
      li.innerHTML = `<span class="text-blue-400 mt-1">•</span><span>${task}</span>`;
      researchModalTasks.appendChild(li);
    });

    // Challenges
    researchModalChallenges.innerHTML = "";
    researchArea.challenges.forEach((challenge) => {
      const li = document.createElement("li");
      li.className = "flex items-start space-x-2";
      li.innerHTML = `<span class="text-red-400 mt-1">•</span><span>${challenge}</span>`;
      researchModalChallenges.appendChild(li);
    });

    // Contributions
    researchModalContributions.innerHTML = "";
    researchArea.contributions.forEach((contribution) => {
      const li = document.createElement("li");
      li.className = "flex items-start space-x-2";
      li.innerHTML = `<span class="text-green-400 mt-1">•</span><span>${contribution}</span>`;
      researchModalContributions.appendChild(li);
    });

    researchModal.classList.add("active");
    document.body.style.overflow = "hidden";
  }

  // Research Modal hide
  function hideResearchModal() {
    if (!researchModal) return;
    researchModal.classList.remove("active");
    document.body.style.overflow = "auto";
  }
  
  // Thesis Modal hide
  function hideThesisModal() {
    if (!thesisModal) return;
    
    // CRITICAL: Clear gallery state when closing modal
    const thumbnailsContainer = document.getElementById("gallery-thumbnails");
    const mainImage = document.getElementById("gallery-main-image");
    const caption = document.getElementById("gallery-caption");
    const counter = document.getElementById("gallery-counter");
    
    // Clear all gallery content
    if (thumbnailsContainer) thumbnailsContainer.innerHTML = '';
    if (mainImage) {
      mainImage.src = '';
      mainImage.alt = '';
    }
    if (caption) caption.textContent = '';
    if (counter) counter.textContent = '';
    
    // Reset gallery state
    galleryImages = [];
    currentImageIndex = 0;
    
    // Close modal
    thesisModal.classList.remove("active");
    document.body.style.overflow = "auto";
  }

  // Thesis Modal show
  function showThesisModal(thesis) {
    console.log("showThesisModal called with:", thesis);
    
    // CRITICAL: Close and clean up any other open modals first
    const projectModal = document.getElementById("project-modal");
    const researchModal = document.getElementById("research-modal");
    
    if (projectModal && projectModal.classList.contains("active")) {
      projectModal.classList.remove("active");
    }
    if (researchModal && researchModal.classList.contains("active")) {
      researchModal.classList.remove("active");
    }
    
    // If thesis modal is already open, clean it up first
    const thesisModal = document.getElementById("thesis-modal");
    if (thesisModal && thesisModal.classList.contains("active")) {
      hideThesisModal();
      // Small delay to ensure cleanup is complete
      setTimeout(() => {
        showThesisModal(thesis);
      }, 100);
      return;
    }
    
    if (!thesisModal) return;

    // Basic information
    thesisModalTitle.textContent = thesis.title;
    thesisModalType.textContent = thesis.type;
    thesisModalYear.textContent = thesis.year;
    thesisModalTopic.textContent = thesis.topic;

    // Handle all optional fields - show/hide sections based on data availability
    // Research Questions
    const researchQuestionsSection = document.getElementById("thesis-research-questions-section");
    const thesisModalResearchQuestions = document.getElementById("thesis-modal-research-questions");
    if (thesis.research_questions && thesis.research_questions.trim()) {
      thesisModalResearchQuestions.textContent = thesis.research_questions;
      researchQuestionsSection.style.display = "block";
    } else {
      researchQuestionsSection.style.display = "none";
    }

    // Hypotheses
    const hypothesesSection = document.getElementById("thesis-hypotheses-section");
    const thesisModalHypotheses = document.getElementById("thesis-modal-hypotheses");
    if (thesis.hypotheses && thesis.hypotheses.trim()) {
      thesisModalHypotheses.textContent = thesis.hypotheses;
      hypothesesSection.style.display = "block";
    } else {
      hypothesesSection.style.display = "none";
    }

    // Tasks/Methodology
    const tasksSection = document.getElementById("thesis-tasks-section");
    const thesisModalTasks = document.getElementById("thesis-modal-tasks");
    if (thesis.tasks && thesis.tasks.length > 0) {
      thesisModalTasks.innerHTML = "";
      thesis.tasks.forEach((task) => {
        const li = document.createElement("li");
        li.className = "flex items-start space-x-2";
        li.innerHTML = `<span class="text-blue-400 mt-1">•</span><span>${task}</span>`;
        thesisModalTasks.appendChild(li);
      });
      tasksSection.style.display = "block";
    } else {
      tasksSection.style.display = "none";
    }

    // Challenges
    const challengesSection = document.getElementById("thesis-challenges-section");
    const thesisModalChallenges = document.getElementById("thesis-modal-challenges");
    if (thesis.challenges && thesis.challenges.length > 0) {
      thesisModalChallenges.innerHTML = "";
      thesis.challenges.forEach((challenge) => {
        const li = document.createElement("li");
        li.className = "flex items-start space-x-2";
        li.innerHTML = `<span class="text-red-400 mt-1">•</span><span>${challenge}</span>`;
        thesisModalChallenges.appendChild(li);
      });
      challengesSection.style.display = "block";
    } else {
      challengesSection.style.display = "none";
    }

    // Contributions
    const contributionsSection = document.getElementById("thesis-contributions-section");
    const thesisModalContributions = document.getElementById("thesis-modal-contributions");
    if (thesis.contributions && thesis.contributions.length > 0) {
      thesisModalContributions.innerHTML = "";
      thesis.contributions.forEach((contribution) => {
        const li = document.createElement("li");
        li.className = "flex items-start space-x-2";
        li.innerHTML = `<span class="text-green-400 mt-1">•</span><span>${contribution}</span>`;
        thesisModalContributions.appendChild(li);
      });
      contributionsSection.style.display = "block";
    } else {
      contributionsSection.style.display = "none";
    }

    // Handle images section
    const imagesSection = document.getElementById("thesis-images-section");
    
    // Reset gallery state completely
    galleryImages = [];
    currentImageIndex = 0;
    
    if (thesis.images && thesis.images.length > 0) {
      console.log("Setting up gallery with images:", thesis.images);
      
      // IMPORTANT: Create a fresh copy of the images array
      galleryImages = [...thesis.images]; // Spread operator creates new array
      currentImageIndex = 0;
      
      // Setup gallery with a small delay
      setTimeout(() => {
        setupCompactGallery();
      }, 50);
      
      imagesSection.style.display = "block";
    } else {
      // Hide gallery section if no images
      imagesSection.style.display = "none";
      
      // Clear any existing gallery content
      const thumbnailsContainer = document.getElementById("gallery-thumbnails");
      const mainImage = document.getElementById("gallery-main-image");
      if (thumbnailsContainer) thumbnailsContainer.innerHTML = '';
      if (mainImage) {
        mainImage.src = '';
        mainImage.alt = '';
      }
    }

    thesisModal.classList.add("active");
    document.body.style.overflow = "hidden";
  }
        
    // Compact gallery setup
    // CRITICAL: Clear previous gallery state before setting up new one
    // const imagesSection = document.getElementById("thesis-images-section"); // Already declared above
        
    // Reset gallery state
    galleryImages = [];
    currentImageIndex = 0;
        
    if (thesis.images && thesis.images.length > 0) {
      console.log("Setting up gallery with images:", thesis.images);
            
      // IMPORTANT: Create a fresh copy of the images array
      galleryImages = [...thesis.images]; // Spread operator creates new array
      currentImageIndex = 0;
            
      // Small delay to ensure DOM is ready
      setTimeout(() => {
        setupCompactGallery();
        
        // 4. Check state AFTER setup (diagnostic continuation)
        setTimeout(() => {
          console.log("Gallery container children AFTER setup:", galleryContainer?.children.length || 0);
          console.log("Main image src AFTER setup:", mainImage?.src || 'empty');
          
          // Check for visual duplicates by position
          const visibleImages = Array.from(document.querySelectorAll('img')).filter(img => 
            img.offsetParent !== null && img.getBoundingClientRect().width > 0
          );
          
          const positionMap = {};
          visibleImages.forEach(img => {
            const rect = img.getBoundingClientRect();
            const key = `${Math.round(rect.top)}-${Math.round(rect.left)}`;
            if (!positionMap[key]) positionMap[key] = [];
            positionMap[key].push({
              src: img.src,
              className: img.className,
              parent: img.parentElement?.className
            });
          });
          
          Object.keys(positionMap).forEach(position => {
            if (positionMap[position].length > 1) {
              console.warn(`🚨 OVERLAPPING IMAGES at position ${position}:`, positionMap[position]);
            }
          });
          
          console.log("=== GALLERY DIAGNOSTIC END ===");
        }, 100);
      }, 50);
            
      imagesSection.style.display = "block";
    } else {
      // Hide gallery section if no images
      imagesSection.style.display = "none";
            
      // Clear any existing gallery content
      const thumbnailsContainer = document.getElementById("gallery-thumbnails");
      const mainImage = document.getElementById("gallery-main-image");
      if (thumbnailsContainer) thumbnailsContainer.innerHTML = '';
      if (mainImage) {
        mainImage.src = '';
        mainImage.alt = '';
      }
    }

    thesisModal.classList.add("active");
    document.body.style.overflow = "hidden";
  }

    function setupCompactGallery() {
    console.log("setupCompactGallery called, current thumbnails:", document.querySelectorAll('.gallery-thumbnail').length);
    const mainImage = document.getElementById("gallery-main-image");
    const thumbnailsContainer = document.getElementById("gallery-thumbnails");
    const caption = document.getElementById("gallery-caption");
    const counter = document.getElementById("gallery-counter");
    const prevBtn = document.getElementById("gallery-prev");
    const nextBtn = document.getElementById("gallery-next");

    if (!mainImage || !thumbnailsContainer) {
      console.log("Gallery elements not found");
      return;
    }

    // CRITICAL FIX: Completely clear and reset the gallery
    // Clear thumbnails container
    thumbnailsContainer.innerHTML = '';
    
    // Reset main image to prevent duplication
    mainImage.src = '';
    mainImage.alt = '';
    mainImage.style.opacity = '1';
    
    // Clear caption and counter
    if (caption) caption.textContent = '';
    if (counter) counter.textContent = '';

    // Reset current image index
    currentImageIndex = 0;

    // Validate galleryImages array
    if (!galleryImages || galleryImages.length === 0) {
      console.log("No gallery images to display");
      return;
    }

    // Remove any existing event listeners by cloning nodes (prevents duplicate listeners)
    let cleanPrevBtn = prevBtn;
    let cleanNextBtn = nextBtn;
    
    if (prevBtn) {
      cleanPrevBtn = prevBtn.cloneNode(true);
      prevBtn.parentNode.replaceChild(cleanPrevBtn, prevBtn);
    }
    
    if (nextBtn) {
      cleanNextBtn = nextBtn.cloneNode(true);
      nextBtn.parentNode.replaceChild(cleanNextBtn, nextBtn);
    }

    // Create thumbnails (only once)
    galleryImages.forEach((image, index) => {
      const thumb = document.createElement("img");
      thumb.src = image.src;
      thumb.alt = image.caption;
      thumb.className = `gallery-thumbnail ${index === 0 ? 'active' : ''}`;
      
      // Add click listener
      thumb.addEventListener("click", () => showImage(index));
      
      // Append to container
      thumbnailsContainer.appendChild(thumb);
    });

    // Setup navigation buttons with clean event listeners
    if (cleanPrevBtn && cleanNextBtn) {
      cleanPrevBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        previousImage();
      });
      
      cleanNextBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        nextImage();
      });

      // Show/hide navigation based on image count
      if (galleryImages.length <= 1) {
        cleanPrevBtn.style.display = "none";
        cleanNextBtn.style.display = "none";
      } else {
        cleanPrevBtn.style.display = "block";
        cleanNextBtn.style.display = "block";
      }
    }

    // Show first image (this should happen only once)
    if (galleryImages.length > 0) {
      showImage(0);
    }

    console.log("Gallery setup complete. Images loaded:", galleryImages.length);
  }

    // CRITICAL FIX: Completely clear and reset the gallery
    // Clear thumbnails container
    thumbnailsContainer.innerHTML = '';
    
    // Reset main image to prevent duplication
    mainImage.src = '';
    mainImage.alt = '';
    
    // Clear caption and counter
    if (caption) caption.textContent = '';
    if (counter) counter.textContent = '';

    // Reset current image index
    currentImageIndex = 0;

    // Validate galleryImages array
    if (!galleryImages || galleryImages.length === 0) {
      console.log("No gallery images to display");
      return;
    }

    // Remove any existing event listeners by cloning nodes (prevents duplicate listeners)
    let cleanPrevBtn = prevBtn;
    let cleanNextBtn = nextBtn;
    
    if (prevBtn) {
      cleanPrevBtn = prevBtn.cloneNode(true);
      prevBtn.parentNode.replaceChild(cleanPrevBtn, prevBtn);
    }
    
    if (nextBtn) {
      cleanNextBtn = nextBtn.cloneNode(true);
      nextBtn.parentNode.replaceChild(cleanNextBtn, nextBtn);
    }

    // Create thumbnails (only once)
    galleryImages.forEach((image, index) => {
      const thumb = document.createElement("img");
      thumb.src = image.src;
      thumb.alt = image.caption;
      thumb.className = `gallery-thumbnail ${index === 0 ? 'active' : ''}`;
      
      // Add click listener
      thumb.addEventListener("click", () => showImage(index));
      
      // Append to container
      thumbnailsContainer.appendChild(thumb);
    });

    // Setup navigation buttons with clean event listeners
    if (cleanPrevBtn && cleanNextBtn) {
      cleanPrevBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        previousImage();
      });
      
      cleanNextBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        nextImage();
      });

      // Show/hide navigation based on image count
      if (galleryImages.length <= 1) {
        cleanPrevBtn.style.display = "none";
        cleanNextBtn.style.display = "none";
      } else {
        cleanPrevBtn.style.display = "block";
        cleanNextBtn.style.display = "block";
      }
    }

    // Show first image (this should happen only once)
    if (galleryImages.length > 0) {
      showImage(0);
    }

    console.log("Gallery setup complete. Images loaded:", galleryImages.length);
  }

  function previousImage() {
    const newIndex = currentImageIndex > 0 ? currentImageIndex - 1 : galleryImages.length - 1;
    showImage(newIndex);
  }

  function nextImage() {
    const newIndex = currentImageIndex < galleryImages.length - 1 ? currentImageIndex + 1 : 0;
    showImage(newIndex);
  }

  function showImage(index) {
    if (!galleryImages || index < 0 || index >= galleryImages.length) {
      console.log("Invalid image index:", index);
      return;
    }

    currentImageIndex = index;
    const image = galleryImages[index];
    
    // Update main image with fade effect
    const mainImage = document.getElementById("gallery-main-image");
    if (mainImage) {
      mainImage.style.opacity = "0";
      setTimeout(() => {
        mainImage.src = image.src;
        mainImage.alt = image.caption;
        mainImage.style.opacity = "1";
      }, 150);
    }

    // Update caption and counter
    const caption = document.getElementById("gallery-caption");
    const counter = document.getElementById("gallery-counter");
    
    if (caption) caption.textContent = image.caption || '';
    if (counter) counter.textContent = `${index + 1}/${galleryImages.length}`;

    // Update active thumbnail
    document.querySelectorAll(".gallery-thumbnail").forEach((thumb, i) => {
      thumb.classList.toggle("active", i === index);
    });
  }

  function setupEventListeners() {
    // Get ALL modal elements (including project modal elements)
    modal = document.getElementById("project-modal");
    modalTitle = document.getElementById("modal-title");
    modalImage = document.getElementById("modal-image");
    modalDescription = document.getElementById("modal-description");
    modalTechnologies = document.getElementById("modal-technologies");
    modalChallenges = document.getElementById("modal-challenges");
    modalOutcomes = document.getElementById("modal-outcomes");
    modalLinks = document.getElementById("modal-links");
    closeModal = document.getElementById("close-modal");

    // Research modal elements
    researchModal = document.getElementById("research-modal");
    researchModalTitle = document.getElementById("research-modal-title");
    researchModalDescription = document.getElementById("research-modal-description");
    researchModalTasks = document.getElementById("research-modal-tasks");
    researchModalChallenges = document.getElementById("research-modal-challenges");
    researchModalContributions = document.getElementById("research-modal-contributions");
    closeResearchModal = document.getElementById("close-research-modal");

    // Thesis modal elements
    thesisModal = document.getElementById("thesis-modal");
    thesisModalTitle = document.getElementById("thesis-modal-title");
    thesisModalType = document.getElementById("thesis-modal-type");
    thesisModalYear = document.getElementById("thesis-modal-year");
    thesisModalTopic = document.getElementById("thesis-modal-topic");
    closeThesisModal = document.getElementById("close-thesis-modal");

    // PROJECT CARD EVENT LISTENERS
    document.querySelectorAll(".project-card").forEach((card) => {
      card.addEventListener("click", (e) => {
        // Prevent opening modal if clicking on GitHub/Demo links
        if (e.target.closest('a')) {
          return;
        }

        const projectId = card.dataset.projectId;
        const project = projectsData[projectId];
        if (project) {
          showModal(project);
        }
      });
    });

    // Thesis items
    document.querySelectorAll(".thesis-item").forEach((item) => {
      console.log("Found thesis item:", item);
      item.addEventListener("click", (e) => {
        console.log("Thesis item clicked!");
        e.preventDefault();
        const thesisIndex = parseInt(item.dataset.thesisIndex);
        console.log("Thesis index:", thesisIndex);
        const thesis = theses[thesisIndex];
        console.log("Thesis data:", thesis);
        if (thesis) {
          console.log("Calling showThesisModal");
          showThesisModal(thesis);
        } else {
          console.log("No thesis found for index:", thesisIndex);
        }
      });
    });

    // Research area items
    document.querySelectorAll(".research-area-item").forEach((item) => {
      item.addEventListener("click", (e) => {
        e.preventDefault();
        const areaIndex = parseInt(item.dataset.areaIndex);
        const researchArea = researchExperiences[areaIndex];
        if (researchArea) showResearchModal(researchArea);
      });
    });

    // Close button event listeners
    if (closeModal) {
      closeModal.addEventListener("click", hideModal);
    }
    if (closeThesisModal) {
      closeThesisModal.addEventListener("click", hideThesisModal);
    }
    if (closeResearchModal) {
      closeResearchModal.addEventListener("click", hideResearchModal);
    }

    // Click outside to close modals
    modal?.addEventListener("click", (e) => {
      if (e.target === modal) hideModal();
    });
    thesisModal?.addEventListener("click", (e) => {
      if (e.target === thesisModal) hideThesisModal();
    });
    researchModal?.addEventListener("click", (e) => {
      if (e.target === researchModal) hideResearchModal();
    });

    // Escape key to close modals
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        hideModal();
        hideThesisModal();
        hideResearchModal();
      }
    });
  }

  // Add keyboard navigation for gallery
  document.addEventListener("keydown", (e) => {
    if (thesisModal && thesisModal.classList.contains("active") && galleryImages && galleryImages.length > 1) {
      if (e.key === "ArrowLeft") {
        e.preventDefault();
        previousImage();
      } else if (e.key === "ArrowRight") {
        e.preventDefault();
        nextImage();
      }
    }
  });
  
  // Setup event listeners
  setTimeout(setupEventListeners, 100);
</script>